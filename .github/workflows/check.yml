name: build-solution

on: [push]

jobs:
  build:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@master

      - name: Setup MSBuild
        uses: microsoft/setup-msbuild@v1.0.0
        with:
          vs-version: 15

      - name: Setup NuGet
        uses: NuGet/setup-nuget@v1.0.2

      - name: Install Microsoft .NET Compilers
        working-directory: src
        run: nuget install Microsoft.NET.Compilers -Version 2.10.0

      - name: Install .NET core
        uses: actions/setup-dotnet@v1
        with:
          dotnet-version: '3.1.100'

      - name: Restore NuGet Packages
        working-directory: src
        run: nuget restore AasxPackageExplorer.sln

      - name: Install dotnet-format
        run: dotnet tool install -g dotnet-format

      - name: Setup ReSharper Command Line Tools
        uses: goit/setup-resharper@v1.0.0
        with:
          version: '2020.1.2'	

      - name: Run the check
        working-directory: src
        run: powershell .\Check.ps1